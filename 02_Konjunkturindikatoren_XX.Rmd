---
output: html_fragment
editor_options: 
  chunk_output_type: console
---

<!--..........................................................................-->
<!--..........................................................................-->

<!-- Include header -->

````{=html}
```{r, echo=FALSE, results='asis'}
xfun::file_string('header_02.html')
```
````
<!--..........................................................................-->
<!--..........................................................................-->

```{r,include=FALSE}

library(knitr)
knitr::opts_chunk$set(
  include = TRUE,
  echo = TRUE,
  warning = FALSE,
  message = FALSE,
  fig.height = 8,
  fig.width = 10,
  fig.align = 'center',
  purl = FALSE)
options(scipen=1)

```



<!--..........................................................................-->
<!--..........................................................................-->



<!--..........................................................................-->
<hr />

# Konjunkturindikatoren {.tabset .tabset-fade}

<hr />

*Dieses Dokument enthält Veröffentlichungen ausgewählter Stimmungs- und Aktivitätsindikatoren.* 

<hr />

<!--..........................................................................-->
## Einordnung

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Einordnung </span> -->

<!--..........................................................................-->
<hr />

Für die Einordnung siehe auch Kapitel 2.2 "Vermessung von Wohlstand".

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Deutschland </button>
<div class="col_content">

![](./figures/02_02_XX_Konjunkturindikatoren_01.png)

</div>
<!--..........................................................................--> 

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Eurozone </button>
<div class="col_content">

![](./figures/02_02_XX_Konjunkturindikatoren_02.png)

</div>
<!--..........................................................................--> 

<!--..........................................................................--> 
<button type="button" class="collapsible02"> USA </button>
<div class="col_content">

![](./figures/02_02_XX_Konjunkturindikatoren_03.png)

</div>
<!--..........................................................................--> 

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
## Vorbereitung {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Vorbereitung </span> -->

<!--..........................................................................-->
<hr />

Die Veröffentlichungen der Umfragen der wichtigsten *Stimmungsindikatoren* werden zum größten Teil aus dem Internet heruntergeladen und eingebunden. ([siehe](https://github.com/mmoessler/macro-dashboard/blob/main/r-scripts/r_web_scraping_functions.R))

Die Werte der wichtigsten *Aktivitätsindikatoren* werden zum größten Teil von öffentlich zugänglichen Datenbanken herunterladen, aufereitet und dargestellt.

Dabei können die Daten entweder auf der entsprechenden Website oder über so genannte Programmierschnittstellen (APIs) heruntergeladen werden.

Für das Herunterladen der Daten über die APIs von [FRED](https://fred.stlouisfed.org/docs/api/fred/) und [eurostat](https://ec.europa.eu/eurostat/de/data/web-services) und die Darstellung der Daten müssen die folgenden Schritte zur Vorbereitung durchgeführt werden.

<!--..........................................................................-->
<hr>

<u>Schritt 1</u>: Setze dein Arbeitsverzeichniss

```{r, eval=FALSE}

setwd("... insert-you-directory-here ...")

```

<!--..........................................................................-->
<hr />

<u>Schritt 2</u>: Lade Pakete zum Herungeralden der Daten

```{r}

library(eurostat)
library(fredr)

```

<!--..........................................................................-->
<hr />

<u>Schritt 3</u>: Registriere dich bei *FRED* und fordere eines API Schlüssels an

1) [FRED Konto](https://fredhelp.stlouisfed.org/fred/account/fred-account-features/register/)
2) [API Schlüssel](https://fred.stlouisfed.org/docs/api/api_key.html)

```{r, eval=FALSE}

fredr_set_key("... insert-your-personal-key-here ...")

```

<!--..........................................................................-->
<hr />

<u>Schritt 4</u>: Lade Pakete zur Verarbeitung der heruntergeladenen Daten

```{r}

library(dplyr)
library(tidyr)
library(ggplot2)
library(scales)
library(zoo)
library(kableExtra)

```

```{r,include=FALSE}

source("../r_set_up.R")

```

<!--..........................................................................-->
<hr />

<u>Schritt 5</u>: Lade Funktion zur Darstellung der Daten

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Lade Funktion </button>
<div class="col_content">

Funktion zur Schattierung der US Rezessionen:

```{r}

# See: https://rpubs.com/FSl/609471 (and edited by MM)
add_rec_shade <- function(st_date, ed_date, shade_color = "darkgray", zoo.mon = FALSE, zoo.qtr = FALSE) {
  
  library(fredr)
  library(ecm)
  library(ggplot2)
  library(zoo)
  
  # fredr_set_key("insert_your_api_key")
  # 
  # st_date <- as.Date("2001-06-01")
  # ed_date <- as.Date(Sys.Date())
  
  recession  <-  fredr(series_id = "USRECD",observation_start = as.Date(st_date),observation_end = as.Date(ed_date))
  
  recession$diff <- recession$value-lagpad(recession$value, k = 1)
  recession <- recession[!is.na(recession$diff),]
  recession.start <- recession[recession$diff == 1,]$date
  recession.end <- recession[recession$diff == (-1),]$date
  
  if(length(recession.start) > length(recession.end)) {
    recession.end <- c(recession.end, Sys.Date())
  }
  if(length(recession.end)>length(recession.start)) {
    recession.start <- c(min(recession$date), recession.start)
  }
  
  recs <- as.data.frame(cbind(recession.start, recession.end))
  recs$recession.start <- as.Date(as.numeric(recs$recession.start), origin = as.Date("1970-01-01"))
  
  if(zoo.mon == TRUE){
    recs$recession.start <- as.yearmon(recs$recession.start, "%b%y")
  }
  if(zoo.qtr == TRUE){
    recs$recession.start <- as.yearqtr(recs$recession.start, "%y-Q%q")
  }
  
  recs$recession.end <- as.Date(recs$recession.end, origin = as.Date("1970-01-01"))
  
  if(zoo.mon == TRUE){
    recs$recession.end <- as.yearmon(recs$recession.end, "%b%y")
  }
  if(zoo.qtr == TRUE){
    recs$recession.end <- as.yearqtr(recs$recession.end, "%y-Q%q")
  }
  
  if(nrow(recs) > 0) {
    rec_shade <- geom_rect(data = recs, inherit.aes = FALSE, 
                           aes(xmin = recession.start, xmax = recession.end, ymin = -Inf, ymax = +Inf), 
                           fill = shade_color, alpha = 0.5)
    
    return(rec_shade)
  }
  
}

```

</div>
<!--..........................................................................--> 

<!--..........................................................................-->
<hr />

<u>Schritt 6</u>: Lade Grafikvorlage zur Darstellung der Daten

<!-- Grafikvorlage für *ggplot*: -->

```{r}

mod.theme.01 <- theme_gray() + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, size = 12),
                                     axis.text.y = element_text(size = 12),
                                     plot.title = element_text(size = 16),
                                     plot.subtitle = element_text(size = 12),
                                     plot.caption = element_text(size = 12),
                                     legend.text = element_text(size = 12))

mod.theme.01$legend.position <- c("bottom")

```

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
## Simmung {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Simmung </span> -->

<!--..........................................................................-->
<hr />

<!--..........................................................................-->
### Produzenten {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Produzenten </span> -->

<!--..........................................................................-->
<hr />

<!--..........................................................................-->
#### Ifo Geschäftsklima

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:20pt;">Ifo Geschäftsklima Index</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Produzenten (generell)
* <u>Region</u>: Deutschland
* <u>Herausgeber</u>: Ifo-Institut ([siehe](https://www.ifo.de/umfrage/ifo-geschaeftsklimaindex))

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Der *Ifo Geschäftsklima Index* ist eine der wichtigsten Messzahlen für die Stimmung bei den deutschen Produzenten.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Ergebnisse</span>

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Aktuelle Veröffentlichung </button>
<div class="col_content">

<center>
<embed src="reports/ifo_index.pdf" width="900" height="1000" type="application/pdf">
</center>

<br>

<p class="sou01">
Quelle: Ifo Institut
</p>

<br>

</div>
<!--..........................................................................--> 

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
#### EU Sentiment

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:20pt;">EU Sentiment</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Produzenten (generell) und Konsumenten
* <u>Region</u>: EU und Eurozone
* <u>Herausgeber</u>: Europäische Kommission ([siehe](https://ec.europa.eu/info/business-economy-euro/indicators-statistics/economic-databases/business-and-consumer-surveys/download-business-and-consumer-survey-data/press-releases_de))

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Die Stimmungsindikatoren von der *Europäischen Kommission* sind eine der wichtigsten Messzahlen für die Stimmung in der Wirtschaft der EU und Eurozone.

Die Stimmung in der gesamten Wirtschaft (Produzenten und Konsumenten) wird durch das "*Wirtschaftsvertrauen*" ("*Economic Sentiment*") dargestellt.

Ein wichtiger Teil des generellen "*Wirtschaftsvertrauens*" ist das "*Konsumentenvertrauen*" ("*Consumer Confidence*").

Ein weiterer wichtiger Teil des generellen "*Wirtschaftsvertrauens*" ist das "*Unternehmensvertrauens*" ("*Business Confidence*").

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Ergebnisse</span>

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Aktuelle Veröffentlichung </button>
<div class="col_content">

<center>
<embed src="reports/eu_sentiment.pdf" width="900" height="1000" type="application/pdf">
</center>

<br>

<p class="sou01">
Quelle: Europäische Kommission
</p>

<br>

</div>
<!--..........................................................................--> 

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
#### ISM EMIs (USA)

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:20pt;">ISM Einkaufsmanagerindizes (EMI/PMI)</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Anbieter, veratbeitendes Gewerbe und Dienstleistungen
* <u>Region</u>: USA
* <u>Herausgeber</u>: Institute for Supply Management (ISM) ([siehe](https://www.ismworld.org/supply-management-news-and-reports/reports/ism-report-on-business/))

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Die *Einkaufsmanagerindizes* vom Instiute for Supply Management (ISM) sind eine der wichtigsten Messzahlen für die Stimmung bei den US Produzenten.

Es gibt zwei Umfragen, eine im *verarbeitenden Gewerbe* sowie eine im *Dienstleistungssektor*.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Ergebnisse</span>

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Aktuelle Veröffentlichung: Verarbeitendes Gewerbe </button>
<div class="col_content">

<center>
<embed src="reports/ism_man_index.pdf" width="900" height="1000" type="application/pdf">
</center>

<br>

<p class="sou01">
Quelle: ISM Institut
</p>

<br>

</div>
<!--..........................................................................--> 

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Aktuelle Veröffentlichung: Dienstleistungssektor </button>
<div class="col_content">

<center>
<embed src="reports/ism_ser_index.pdf" width="900" height="1000" type="application/pdf">
</center>

<br>

<p class="sou01">
Quelle: ISM Institut
</p>

<br>

</div>
<!--..........................................................................--> 

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
### Konsumenten {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Konsumenten </span> -->

<!--..........................................................................-->
<hr />

<!--..........................................................................-->
#### GfK Konsumklima

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:20pt;">GfK Konsumklima</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Konsumenten
* <u>Region</u>: Deutschland
* <u>Herausgeber</u>: GfK ([siehe](https://www.gfk.com/de/home))

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Das *GfK Konsumentenvertrauen* ist eine der wichtigsten Messzahlen für die Stimmung bei den deutschen Konsumenten.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Ergebnisse</span>

<!--..........................................................................--> 
<button type="button" class="collapsible02"> Aktuelle Veröffentlichung </button>
<div class="col_content">

<center>
<embed src="reports/gfk_index.pdf" width="900" height="1000" type="application/pdf">
</center>

<br>

<p class="sou01">
Quelle: GfK
</p>

<br>

</div>
<!--..........................................................................--> 

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
#### UoM Consumer Confidence

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:20pt;">UoM Consumer Confidence</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Konsumenten
* <u>Region</u>: USA
* <u>Herausgeber</u>: University of Michigan ([siehe](https://data.sca.isr.umich.edu/))

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Das *UoM Konsumentenvertrauen* ist eine der wichtigsten Messzahlen für die Stimmung bei den US Konsumenten.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Ergebnisse</span>

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Code* </button>
<div class="cod_content">
```{r,results=FALSE,fig.show='hide',eval=FALSE}

# Meta data
met.dat <- fredr_series_search_text("UMCSENT")

# Data
ser.dat <- fredr_series_observations(series_id = met.dat$id[1],
                                     observation_start = as.Date("2000-01-01"),
                                     units = "lin")
# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date, "%b%y")

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = value,color = series_id)) +
  add_rec_shade(min(ser.dat$date), max(ser.dat$date), zoo.mon = TRUE, zoo.qtr = FALSE) +
  geom_line(color = "black", size = 1) +
  scale_y_continuous(name = "Index (1966-Q1=100)", labels = comma) +
  scale_x_yearmon(breaks=seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  format = "%b %y",
                  expand = c(0, 0)) +
  labs(title = met.dat$title[1],
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(met.dat$observation_end)), c(")")),
       caption = "Quelle: University of Michigan", 
       x = "", y = "Index (1966-Q1=100)") +
  mod.theme.01


# Return plot
plot

```
</div>
<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Output* </button>
<div class="cod_content">
```{r,echo=FALSE}

# Meta data
met.dat <- fredr_series_search_text("UMCSENT")

# Data
ser.dat <- fredr_series_observations(series_id = met.dat$id[1],
                                     observation_start = as.Date("2000-01-01"),
                                     units = "lin")
# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date, "%b%y")

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = value,color = series_id)) +
  add_rec_shade(min(ser.dat$date), max(ser.dat$date), zoo.mon = TRUE, zoo.qtr = FALSE) +
  geom_line(color = "black", size = 1) +
  scale_y_continuous(name = "Index (1966-Q1=100)", labels = comma) +
  scale_x_yearmon(breaks=seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  format = "%b %y",
                  expand = c(0, 0)) +
  labs(title = met.dat$title[1],
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(met.dat$observation_end)), c(")")),
       caption = "Quelle: University of Michigan", 
       x = "", y = "Index (1966-Q1=100)") +
  mod.theme.01


# Return plot
plot

```

</div>
<!--..........................................................................-->

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Letzte Werte* </button>
<div class="col_content">
```{r, echo=FALSE, results=TRUE}

tab <- cbind(tail(ser.dat[,c(1,3)]))

colnames(tab) <- c("Datum", "Wert")

tab$Datum <- as.yearmon(as.Date(tab$Datum))

tab %>%
  kbl(format.args = list(decimal.mark = ',', big.mark = ".")) %>%
  kable_styling()

```
</div>
<!--..........................................................................-->

```{r,include=FALSE,purl=TRUE}

# Save plot
ggsave(plot = plot, width = 8, height = 6, dpi = 300, filename = "./figures/UMCSENT_lev.pdf")

```

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
## Aktivität {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Aktivität </span> -->

<!--..........................................................................-->
<hr />

<!--..........................................................................-->
### Produzenten {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Produzenten </span> -->

<!--..........................................................................-->
<hr />

<!--..........................................................................-->
#### EU Industrieproduktion

<!--..........................................................................-->
<!-- <hr /> -->

<span style="text-decoration:underline; font-size:20pt;">EU Industrieproduktion</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Produzenten, verarbeitendes Gewerbe
* <u>Region</u>: EU Mitgliedstaaten
* <u>Herausgeber</u>: Eurostat ([siehe](https://ec.europa.eu/eurostat/de/home))
* <u>Bereinigung</u>: Saison-, kalender- und preisbereinigung

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Die Industrieproduktion ist die wichtigste Messzahl um die Aktivität bei den Produzenten darzustellen.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Werte</span>

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Code* </button>
<div class="cod_content">
```{r,results=FALSE,fig.show='hide',eval=FALSE}

source("./r-scripts/r_eurostat_helper_functions.R")

# Url
url <- "https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/sts_inpr_m?format=JSON&geo=DE&geo=FR&geo=EA19&freq=M&unit=I15&s_adj=SCA&indic_bt=PROD&nace_r2=B-D"

# Data
ser.dat <- get_eurostat_xx(url = url)

# Transform date to date class
ser.dat$date.dat <- as.Date(as.yearmon(ser.dat$time))
# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date.dat, "%b%y")

# Subset data
ser.dat <- subset(ser.dat, date.dat %in% seq(as.Date("2015-01-01"), Sys.Date(), by = "month"))

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = values, color = geo)) +
  geom_line(size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 3/12),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1/12),
                  format = "%b %y",
                  expand = c(0, 0)) +
  scale_y_continuous(breaks = seq(0, 200, 5)) + 
  scale_color_discrete(name = "", labels = c("DEU","EURO-19","FRA")) +
  labs(title = "Industrieproduktion (saison- und kalenderbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(ser.dat$date.dat[length(ser.dat$time)])), c(")")),
       caption = "Quelle: Eurostat", 
       x = "", y = "Mengenindex (2015=100)") +
  mod.theme.01

# Return plot
plot

```
</div>
<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Output* </button>
<div class="cod_content">
```{r,echo=FALSE}

source("./r-scripts/r_eurostat_helper_functions.R")

# Url
url <- "https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/sts_inpr_m?format=JSON&geo=DE&geo=FR&geo=EA19&freq=M&unit=I15&s_adj=SCA&indic_bt=PROD&nace_r2=B-D"

# Data
ser.dat <- get_eurostat_xx(url = url)

# Transform date to date class
ser.dat$date.dat <- as.Date(as.yearmon(ser.dat$time))
# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date.dat, "%b%y")

# Subset data
ser.dat <- subset(ser.dat, date.dat %in% seq(as.Date("2015-01-01"), Sys.Date(), by = "month"))

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = values, color = geo)) +
  geom_line(size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 3/12),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1/12),
                  format = "%b %y",
                  expand = c(0, 0)) +
  scale_y_continuous(breaks = seq(0, 200, 5)) + 
  scale_color_discrete(name = "", labels = c("DEU","EURO-19","FRA")) +
  labs(title = "Industrieproduktion (saison- und kalenderbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(ser.dat$date.dat[length(ser.dat$time)])), c(")")),
       caption = "Quelle: Eurostat", 
       x = "", y = "Mengenindex (2015=100)") +
  mod.theme.01

# Return plot
plot

```

</div>
<!--..........................................................................-->

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Letzte Werte* </button>
<div class="col_content">
```{r, echo=FALSE, results=TRUE}

tab <- cbind(tail(ser.dat[ser.dat$geo %in% c("DE"),c(7,8)],10),
             tail(ser.dat[ser.dat$geo %in% c("FR"),c(8)],10),
             tail(ser.dat[ser.dat$geo %in% c("EA19"),c(8)],10))

colnames(tab) <- c("Zeitraum", "DEU", "FRA", "EURO-19")

# tab$Zeitraum <- as.yearmon(as.Date(tab$Zeitraum))
tab$Zeitraum <- as.yearmon(tab$Zeitraum)

tab %>%
  kbl(format.args = list(decimal.mark = ',', big.mark = ".")) %>%
  kable_styling()

```
</div>
<!--..........................................................................-->

```{r,include=FALSE, eval=FALSE}

# Save plot
ggsave(plot=plot, width=8, height=6, dpi=300, filename = "./figures/EU_INDPRO_lev.pdf")

```

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
#### US Industrieproduktion

<!--..........................................................................-->
<!-- <hr /> -->

<span style="text-decoration:underline; font-size:20pt;">USA Industrieproduktion</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Produzenten
* <u>Region</u>: USA
* <u>Herausgeber</u>: Board of Governors of the Federal Reserve System ([siehe](https://www.federalreserve.gov/releases/g17/current/default.htm))
* <u>Bereinigung</u>: Saison- und preisbereinigung, keine kalenderbereingung

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Die Industrieproduktion ist die wichtigste Messzahl um die Aktivität bei den Produzenten darzustellen.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Ergebnisse</span>

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Code* </button>
<div class="cod_content">
```{r,results=FALSE,fig.show='hide',eval=FALSE}

# Meta data
met.dat <- fredr_series_search_text("INDPRO")

# Data
ser.dat <- fredr_series_observations(series_id = met.dat$id[1],
                                     observation_start = as.Date("2000-01-01"),
                                     units = "lin")

# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date, "%b%y")

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = value, color = series_id)) +
  add_rec_shade(min(ser.dat$date), max(ser.dat$date), zoo.mon = TRUE, zoo.qtr = FALSE) +
  geom_line(color = "black", size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  format = "%b %y",
                  expand = c(0, 0)) +
  labs(title = "Industrieproduktion (saisonbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(met.dat$observation_end)), c(")")),
       caption = "Quelle: Board of Governors of the Federal Reserve System", 
       x = "", y = "Mengenindex (2017=100)") +
  mod.theme.01

# Return plot
plot

```
</div>
<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Output* </button>
<div class="cod_content">
```{r,echo=FALSE}

# Meta data
met.dat <- fredr_series_search_text("INDPRO")

# Data
ser.dat <- fredr_series_observations(series_id = met.dat$id[1],
                                     observation_start = as.Date("2000-01-01"),
                                     units = "lin")

# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date, "%b%y")

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = value, color = series_id)) +
  add_rec_shade(min(ser.dat$date), max(ser.dat$date), zoo.mon = TRUE, zoo.qtr = FALSE) +
  geom_line(color = "black", size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 2),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  format = "%b %y",
                  expand = c(0, 0)) +
  labs(title = "Industrieproduktion (saisonbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(met.dat$observation_end)), c(")")),
       caption = "Quelle: Board of Governors of the Federal Reserve System", 
       x = "", y = "Mengenindex (2017=100)") +
  mod.theme.01

# Return plot
plot

```

</div>
<!--..........................................................................-->

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Letzte Werte* </button>
<div class="col_content">
```{r, echo=FALSE, results=TRUE}

tab <- tail(ser.dat,10)[,c(1,3)]
colnames(tab) <- c("Zeitraum", "Wert")

tab$Zeitraum <- as.yearmon(as.Date(tab$Zeitraum))

tab$Wert <- round(tab$Wert, 2)

tab %>%
  kbl(format.args = list(decimal.mark = ',', big.mark = ".")) %>%
  kable_styling()

```
</div>
<!--..........................................................................-->

```{r,include=FALSE,purl=TRUE}

# Save plot
ggsave(plot = plot, width = 8, height = 6, dpi = 300, filename = "./figures/US_INDPRO_lev.pdf")

```

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
### Konsumenten {.tabset .tabset-fade}

<!--..........................................................................-->
<!-- <hr /> -->

<!-- <span style="font-size:20pt;"> Konsumenten </span> -->

<!--..........................................................................-->
<hr />

<!--..........................................................................-->
#### EU Einzelhandelsumsätze

<!--..........................................................................-->
<!-- <hr /> -->

<span style="text-decoration:underline; font-size:20pt;">EU Einzelhandelsumsätze</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Konsumenten
* <u>Region</u>: EU Mitgliedsstaaten
* <u>Herausgeber</u>: Eurostat ([siehe](https://ec.europa.eu/eurostat/de/home))
* <u>Bereinigung</u>: Saison-, Kalender- und Preisbereinigung

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Die Einzelhandelsumsätze ist eine der wichtigsten Messzahlen um die Aktivität bei den Konsumenten darzustellen.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Werte</span>

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Code* </button>
<div class="cod_content">
```{r,results=FALSE,fig.show='hide',eval=FALSE}

source("./r-scripts/r_eurostat_helper_functions.R")

# Url
url <- "https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/sts_inpr_m?format=JSON&geo=DE&geo=FR&geo=EA19&freq=M&unit=I15&s_adj=SCA&indic_bt=PROD&nace_r2=B-D"

# Data
ser.dat <- get_eurostat_xx(url = url)

# Transform date to date class
ser.dat$date.dat <- as.Date(as.yearmon(ser.dat$time))
# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date.dat, "%b%y")

# Subset data
ser.dat <- subset(ser.dat, date.dat %in% seq(as.Date("2015-01-01"), Sys.Date(), by = "month"))

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = values, color = geo)) +
  geom_line(size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 3/12),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1/12),
                  format = "%b %y",
                  expand = c(0, 0)) +
  scale_y_continuous(breaks = seq(0, 200, 10)) + 
  scale_color_discrete(name = "", labels = c("DEU","EURO-19","FRA")) +
  labs(title = "Einzelhandelsumsätze (saison-, kalender- und preisbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(ser.dat$date.dat[length(ser.dat$time)])), c(")")),
       caption = "Quelle: Eurostat", 
       x = "", y = "Index 2015=100") +
  mod.theme.01

# Return plot
plot

```
</div>
<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Output* </button>
<div class="cod_content">
```{r,echo=FALSE}

source("./r-scripts/r_eurostat_helper_functions.R")

# Url
url <- "https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/sts_inpr_m?format=JSON&geo=DE&geo=FR&geo=EA19&freq=M&unit=I15&s_adj=SCA&indic_bt=PROD&nace_r2=B-D"

# Data
ser.dat <- get_eurostat_xx(url = url)

# Transform date to date class
ser.dat$date.dat <- as.Date(as.yearmon(ser.dat$time))
# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date.dat, "%b%y")

# Subset data
ser.dat <- subset(ser.dat, date.dat %in% seq(as.Date("2015-01-01"), Sys.Date(), by = "month"))

# Construct plot
plot <- ggplot(data = ser.dat, mapping = aes(x = date.zoo, y = values, color = geo)) +
  geom_line(size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 3/12),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1/12),
                  format = "%b %y",
                  expand = c(0, 0)) +
  scale_y_continuous(breaks = seq(0, 200, 10)) + 
  scale_color_discrete(name = "", labels = c("DEU","EURO-19","FRA")) +
  labs(title = "Einzelhandelsumsätze (saison-, kalender- und preisbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(ser.dat$date.dat[length(ser.dat$time)])), c(")")),
       caption = "Quelle: Eurostat", 
       x = "", y = "Index 2015=100") +
  mod.theme.01

# Return plot
plot

```

</div>
<!--..........................................................................-->

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Letzte Werte* </button>
<div class="col_content">
```{r, echo=FALSE, results=TRUE}

tab <- cbind(tail(ser.dat[ser.dat$geo %in% c("DE"),c(7,8)],10),
             tail(ser.dat[ser.dat$geo %in% c("FR"),c(8)],10),
             tail(ser.dat[ser.dat$geo %in% c("EA19"),c(8)],10))

colnames(tab) <- c("Zeitraum", "DEU", "FRA", "EURO-19")

tab$Zeitraum <- as.yearmon(tab$Zeitraum)

# tab
tab %>%
  kbl(format.args = list(decimal.mark = ',', big.mark = ".")) %>%
  kable_styling()

```
</div>
<!--..........................................................................-->

```{r,include=FALSE, eval=FALSE}

# Save plot
ggsave(plot=plot, width=8, height=6, dpi=300, filename = "./figures/EU_RETSAL_lev.pdf")

```

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />



<!--..........................................................................-->
<!-- <hr /> -->

<!--..........................................................................-->
#### US Einzelhandelsumsätze

<!--..........................................................................-->
<!-- <hr /> -->

<span style="text-decoration:underline; font-size:20pt;">US Einzelhandelsumsätze</span>

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Überblick</span>

* <u>Einordnung</u>: Konsumenten
* <u>Region</u>: USA
* <u>Herausgeber</u>: U.S. Census Bureau ([siehe](https://www.census.gov/))
* <u>Bereinigung</u>: Saisonbereinigung, keine kalender- und preisbereinigung

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;">Weitere Informationen</span>

Die Einzelhandelsumsätze ist eine der wichtigsten Messzahlen um die Aktivität bei den Konsumenten darzustellen.

<!--..........................................................................-->
<hr />

<span style="text-decoration:underline; font-size:18pt;"> Werte </span>

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Code* </button>
<div class="cod_content">
```{r,results=FALSE,fig.show='hide',eval=FALSE}

# Meta data
met.dat <- fredr_series_search_text("RSXFS")

# Data
ser.dat <- fredr_series_observations(series_id=met.dat$id[1],
                                     observation_start=as.Date("2000-01-01"),
                                     units="lin")

# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date,"%b%y")

# Transform from "Millions of Dollars" to "Billions of Dollars"
ser.dat$value <- ser.dat$value/1000

# Construct plot
plot <- ggplot(data=ser.dat,mapping=aes(x=date.zoo,y=value,color=series_id)) +
  add_rec_shade(min(ser.dat$date),max(ser.dat$date),zoo.mon=TRUE,zoo.qtr=FALSE) +
  geom_line(color = "black", size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  format = "%b %y",
                  expand = c(0, 0)) +
  scale_y_continuous(breaks = seq(0, 1000, 50)) + 
  labs(title = "Einzelhandelsumsätze (saisonbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(met.dat$observation_end)), c(")")),
       caption = "Quelle: U.S. Census Bureau", 
       x = "", y = "US Dollar in Milliarden") +
  mod.theme.01

# Return plot
plot

```
</div>
<!--..........................................................................-->
<button type="button" class="collapsible01"> *Show Output* </button>
<div class="cod_content">
```{r,echo=FALSE}

# Meta data
met.dat <- fredr_series_search_text("RSXFS")

# Data
ser.dat <- fredr_series_observations(series_id=met.dat$id[1],
                                     observation_start=as.Date("2000-01-01"),
                                     units="lin")

# Transform date to yearmon class
ser.dat$date.zoo <- as.yearmon(ser.dat$date,"%b%y")

# Transform from "Millions of Dollars" to "Billions of Dollars"
ser.dat$value <- ser.dat$value/1000

# Construct plot
plot <- ggplot(data=ser.dat,mapping=aes(x=date.zoo,y=value,color=series_id)) +
  add_rec_shade(min(ser.dat$date),max(ser.dat$date),zoo.mon=TRUE,zoo.qtr=FALSE) +
  geom_line(color = "black", size = 1) +
  scale_x_yearmon(breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 2),
                  minor_breaks = seq(from = min(ser.dat$date.zoo), to = max(ser.dat$date.zoo), by = 1),
                  format = "%b %y",
                  expand = c(0, 0)) +
  scale_y_continuous(breaks = seq(0, 1000, 50)) + 
  labs(title = "Einzelhandelsumsätze (saisonbereinigt)",
       subtitle = paste0(c("(Letzter Beobachtungswert: "), as.yearmon(as.Date(met.dat$observation_end)), c(")")),
       caption = "Quelle: U.S. Census Bureau", 
       x = "", y = "US Dollar in Milliarden") +
  mod.theme.01

# Return plot
plot

```

</div>
<!--..........................................................................-->

<!--..........................................................................-->
<button type="button" class="collapsible01"> *Letzte Werte* </button>
<div class="col_content">
```{r, echo=FALSE, results=TRUE}

tab <- cbind(tail(ser.dat[,c(1,3)]))

colnames(tab) <- c("Datum", "Wert")

tab$Datum <- as.yearmon(as.Date(tab$Datum))

tab %>%
  kbl(format.args = list(decimal.mark = ',', big.mark = ".")) %>%
  kable_styling()

```
</div>
<!--..........................................................................-->

```{r,include=FALSE}

# Save plot
ggsave(plot=plot, width=8, height=6, dpi=300, filename = "./figures/US_RETSAL_lev.pdf")

```

<!--..........................................................................-->
<hr />

<p class="back01">
[Zurück zur *Startseite*](./index.html)
</p>

<!--..........................................................................-->
<hr />





<!--..........................................................................--> 
<!-- THIS IS THE END --> 

<!-- Include bottom -->

````{=html}
```{r, include=TRUE, echo=FALSE, results='asis'}
xfun::file_string('bottom_01.html')
```
````

